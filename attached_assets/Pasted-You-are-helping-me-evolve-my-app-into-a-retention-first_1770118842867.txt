You are helping me evolve my app into a retention-first “personal layer” on top of existing services. The app is called FamPal (name can stay for now). The goal is NOT to rebuild Google Maps, Yelp, WhatsApp, or a calendar. The goal is to integrate with those services and store only user-specific value so people keep coming back.

Core product goal
Make it easy for couples, families, and friend groups to decide what to do, remember what they liked, and plan lightly without chaos. The app must feel effortless. No habit spam, streaks, or heavy data entry. People should return because it reduces decision fatigue and preserves shared memory.

Key principles
1. Integrate not own
   - Place data comes from a places provider API (Google Places or similar). We store only place_id plus user notes, favourites, tags, “been here”, and plan items.
   - Navigation uses deep links to Google Maps or Apple Maps. We do not build mapping.
   - Calendar uses “Add to calendar” (device calendar integration or ICS). We do not build a calendar system.
   - Messaging is not rebuilt. For V1 use “Share to WhatsApp” deep links. Optional: simple comment thread inside FamPal later.
2. Personal and private first
   - Users can create private notes on places that are not public.
   - Users can optionally publish reviews, but the key feature is private notes and group recommendations.
3. Groups and shared spaces
   - Support a “partner” shared space and optional groups (family, friends). Group data includes shared saved places, shared notes (optional), and shared plan items.
4. Memories
   - Tie memories to a place: text note plus optional photos. Prefer light storage: either store small compressed uploads with limits or store references. Keep costs low.
5. AI summaries and Q and A
   - AI is user-triggered not automatic. Provide a button like “Ask about this place” and “Generate family friendly summary”.
   - Cache AI results per place_id so we do not pay repeatedly.

Immediate engineering tasks (focus on stability first)
1. Fix local Google Auth so I can test without deploying
   - Identify why Google auth fails locally
   - Ensure correct redirect URIs for localhost
   - Ensure env variables are loaded locally
   - Provide exact code changes and where they go
2. Fix deploy blocker related to IAM policy
   - Identify where the deploy is failing (Firebase App Hosting to Cloud Run / IAM)
   - Explain which service account needs which roles and what policy is required
   - Provide the minimal steps to fix
3. Fix images not loading locally
   - Inspect how images are referenced in the UI (static asset paths vs remote place photos)
   - If place photos require an API key or photo endpoint, ensure local env has the key and the UI maps photo_reference correctly
   - Use the browser network errors to locate the cause and fix the mapping/CORS/URL issues

Feature roadmap (do not implement all at once)
V1 focus
- Auth (Google and Apple if possible)
- Browse nearby places with radius
- Place detail page with save/favourite and private notes
- Simple “plan this” flow with add to calendar
- Share to WhatsApp button for a place or plan
- AI ask button with cached responses
V1.1
- Partner shared space and small groups
- Memories tied to places with optional photo uploads and limits

Instructions for you
Do not rewrite the app from scratch. Make incremental changes. When you propose changes, give:
- file names
- code snippets
- exact steps to test locally
- exact steps to deploy
- any required config changes in Firebase/Google Cloud (redirect URIs, IAM roles, env vars)
